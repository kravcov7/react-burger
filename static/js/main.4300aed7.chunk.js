(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{109:function(e,t,n){e.exports={main:"burger-block_main__2Bj15"}},11:function(e,t,n){e.exports={box:"ingredient-details_box__14cly",ingredient:"ingredient-details_ingredient__2mqU8",container:"ingredient-details_container__HgquV",container__subtitle:"ingredient-details_container__subtitle__3lVIO",box__item:"ingredient-details_box__item__2kGqV",box__sum:"ingredient-details_box__sum__2e-E_"}},111:function(e,t,n){e.exports={item:"burger-constructor-elements_item__38hvc"}},112:function(e,t,n){e.exports={loader:"preloader_loader__3uKcg"}},113:function(e,t,n){e.exports={container:"App_container__23kon"}},115:function(e,t,n){e.exports={main:"feed_main__14Z3G",link:"feed_link__3l-gu"}},116:function(e,t,n){e.exports={overlay:"modal-overlay_overlay__2XHPC"}},123:function(e,t,n){},199:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(35),s=n.n(c),i=(n(123),n(29)),o=n(36),l=n(30),u=n(2),d="REGISTER_REQUEST",j="REGISTER_SUCCESS",b="REGISTER_FAILED",m="LOGIN_REQUEST",_="LOGIN_SUCCESS",p="LOGIN_FAILED",O="FORGOT_PASSWORD_REQUEST",x="FORGOT_PASSWORD_FAILED",f="FORGOT_PASSWORD_SUCCESS",h="LOAD_USER_REQUEST",g="LOAD_USER_SUCCESS",v="LOAD_USER_FAILED",y="UPDATE_USER_REQUEST",N="UPDATE_USER_SUCCESS",E="UPDATE_USER_FAILED",S="LOGOUT_REQUEST",T="LOGOUT_SUCCESS",k="LOGOUT_FAILED",C="REFRESH_TOKEN_REQUEST",I="REFRESH_TOKEN_SUCCESS",w="REFRESH_TOKEN_FAILED",R={email:"",name:"",registerRequest:!1,registerFailed:!1,loginRequest:!1,loginFailed:!1,loadUserRequest:!1,loadUserFailed:!1,logoutRequest:!1,logoutFailed:!1,forgotPasswordRequest:!1,forgotPasswordFailed:!1,isforgotPasswordRequest:!1,isforgotPasswordSaccess:!1,isTokenUpdated:!1,tokenUpdateDate:!1},D=n(16),U="WS_CONNECTION_CLOSED",A="WS_CONNECTION_ERROR",P="WS_CONNECTION_SUCCESS",F="WS_GET_MESSAGE",L="WS_CONNECTION_START",G={wsConnected:!1,orders:[],total:0,totalToday:0},B="WS_CONNECTION_CLOSED_AUTH",q="WS_CONNECTION_ERROR_AUTH",z="WS_CONNECTION_SUCCESS_AUTH",M="WS_GET_MESSAGE_AUTH",W="WS_CONNECTION_START_AUTH",H={wsConnected:!1,orders:[],total:0,totalToday:0},J=n(37),Q=n(18),K=n(208),V="INCREASE_INGREDIENT",Y="DECREASE_INGREDIENT",Z="DELETE_ITEM",X="MOVE_ITEM",$="GET_INGREDIENTS_FAILED",ee="GET_INGREDIENTS_REQUEST",te="GET_INGREDIENTS_SUCCESS",ne="ADD_INGREDIENTS_BUN",ae="ADD_INGREDIENTS_FILLINGS",re="CREATE_ORDER_REQUEST",ce="CREATE_ORDER_SUCCESS",se="CREATE_ORDER_FAILED",ie={isLoading:!1,hasError:!1,dataReceived:!1,data:[],burger:{bun:null,fillings:[]},counts:{},currentOrder:null,orderIsLoading:!1,orderHasError:!1},oe=Object(D.a)(),le=Object(l.b)({card:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ee:return Object(u.a)(Object(u.a)({},e),{},{isLoading:!0,hasError:!1});case te:return Object(u.a)(Object(u.a)({},e),{},{hasError:!1,data:t.data,isLoading:!1,dataReceived:!0});case $:return Object(u.a)(Object(u.a)({},e),{},{hasError:!0,isLoading:!1});case re:return Object(u.a)(Object(u.a)({},e),{},{orderIsLoading:!0,orderHasError:!1});case ce:return Object(u.a)(Object(u.a)({},e),{},{orderHasError:!1,currentOrder:t.data,orderIsLoading:!1});case se:return Object(u.a)(Object(u.a)({},e),{},{orderHasError:!0,orderIsLoading:!1});case V:return"bun"===t.item.type?e:Object(u.a)(Object(u.a)({},e),{},{counts:Object(u.a)(Object(u.a)({},e.counts),{},Object(Q.a)({},t.item._id,(e.counts[t.item._id]||0)+1))});case Y:var n=t.typeItem;return"bun"!==n?Object(u.a)(Object(u.a)({},e),{},{counts:Object(u.a)(Object(u.a)({},e.counts),{},Object(Q.a)({},t.key,e.counts[t.key]-1))}):e;case Z:return Object(u.a)(Object(u.a)({},e),{},{burger:Object(u.a)(Object(u.a)({},e.burger),{},{fillings:Object(J.a)(e.burger.fillings).filter((function(e){return e.productId!==t.id}))})});case X:var a=Object(J.a)(e.burger.fillings);return a.splice(t.toIndex,0,a.splice(t.fromIndex,1)[0]),Object(u.a)(Object(u.a)({},e),{},{burger:Object(u.a)(Object(u.a)({},e.burger),{},{fillings:a})});case ne:return Object(u.a)(Object(u.a)({},e),{},{burger:Object(u.a)(Object(u.a)({},e.burger),{},{bun:t.item})});case ae:var r=Object(u.a)(Object(u.a)({},t.item),{},{productId:Object(K.a)()});return Object(u.a)(Object(u.a)({},e),{},{burger:Object(u.a)(Object(u.a)({},e.burger),{},{fillings:[].concat(Object(J.a)(e.burger.fillings),[r])})});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return Object(u.a)(Object(u.a)({},e),{},{registerRequest:!0});case j:return Object(u.a)(Object(u.a)({},e),{},{name:t.user.name,email:t.user.email});case b:return Object(u.a)(Object(u.a)({},e),{},{registerFailed:!0});case m:return Object(u.a)(Object(u.a)({},e),{},{loginRequest:!0});case _:return Object(u.a)(Object(u.a)({},e),{},{name:t.user.name,email:t.user.email});case p:return Object(u.a)(Object(u.a)({},e),{},{loginFailed:!0});case h:return Object(u.a)(Object(u.a)({},e),{},{loadUserRequest:!0});case g:return Object(u.a)(Object(u.a)({},e),{},{name:t.user.name,email:t.user.email});case v:return Object(u.a)(Object(u.a)({},e),{},{loadUserFailed:!0});case y:return Object(u.a)(Object(u.a)({},e),{},{loginRequest:!0});case N:return Object(u.a)(Object(u.a)({},e),{},{name:t.user.name,email:t.user.email});case E:return Object(u.a)(Object(u.a)({},e),{},{loginFailed:!0});case S:return Object(u.a)(Object(u.a)({},e),{},{logoutRequest:!0});case T:return Object(u.a)(Object(u.a)({},e),{},{name:"",email:""});case k:return Object(u.a)(Object(u.a)({},e),{},{logoutFailed:!0});case O:return Object(u.a)(Object(u.a)({},e),{},{forgotPasswordRequest:!0});case f:return Object(u.a)(Object(u.a)({},e),{},{isforgotPasswordRequest:!0,isforgotPasswordSaccess:!0});case x:return Object(u.a)(Object(u.a)({},e),{},{forgotPasswordFailed:!0,isforgotPasswordRequest:!0});case C:return Object(u.a)({},e);case I:return Object(u.a)(Object(u.a)({},e),{},{isTokenUpdated:!0,tokenUpdateDate:!0});case w:return Object(u.a)(Object(u.a)({},e),{},{isTokenUpdated:!0});default:return e}},router:Object(o.b)(oe),ws:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return Object(u.a)(Object(u.a)({},e),{},{wsConnected:!0});case A:case U:return Object(u.a)(Object(u.a)({},e),{},{wsConnected:!1});case F:return console.log(t.payload),Object(u.a)(Object(u.a)({},e),{},{orders:t.payload.orders,total:t.payload.total,totalToday:t.payload.totalToday});default:return e}},wsAuth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z:return Object(u.a)(Object(u.a)({},e),{},{wsConnected:!0});case q:case B:return Object(u.a)(Object(u.a)({},e),{},{wsConnected:!1});case M:return Object(u.a)(Object(u.a)({},e),{},{orders:t.payload.orders,total:t.payload.total,totalToday:t.payload.totalToday});default:return e}}}),ue=n(55),de=function(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\$?*|{}\\\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0},je=function(e,t,n){var a=(n=Object(u.a)({path:"/"},n)).expires,r=new Date;"number"==typeof a&&a&&(r.setTime(r.getTime()+1e3*a),a=n.expires=Number(r)),a&&r.toUTCString&&(n.expires=r.toUTCString());var c=e+"="+(t=encodeURIComponent(t));for(var s in n){c+="; "+s;var i=n[s];!0!==i&&(c+="="+i)}document.cookie=c},be=function(e){je(e,!1,{expires:-1})},me=function(e,t,n){return function(a){var r=null;return function(c){return function(s){var i=a.dispatch,o=s.type,l=t.wsInit,u=t.onOpen,d=t.onClose,j=t.onError,b=t.onMessage,m=n?de("token"):null;o===l&&(r=m?new WebSocket("".concat(e,"?token=").concat(m)):new WebSocket("".concat(e))),r&&(r.onopen=function(e){i({type:u,payload:e})},r.onerror=function(e){i({type:j,payload:e})},r.onmessage=function(e){var t=e.data,n=JSON.parse(t),a=(n.success,Object(ue.a)(n,["success"]));i({type:b,payload:a})},r.onclose=function(e){i({type:d,payload:e})}),c(s)}}}},_e=n(90),pe=n(108),Oe={wsInit:L,onOpen:P,onClose:U,onError:A,onMessage:F},xe={wsInit:W,onOpen:z,onClose:B,onError:q,onMessage:M},fe=(window.REDUX_DEVTOOLS_EXTENSION_COMPOSE||l.c)(Object(l.a)(pe.a,Object(_e.a)(oe),me("wss://norma.nomoreparties.space/orders/all",Oe,!1),me("wss://norma.nomoreparties.space/orders",xe,!0))),he=Object(l.d)(le,fe),ge=n(10),ve=n(25),ye=n.n(ve),Ne=n(3),Ee=n.n(Ne),Se=n(5),Te=n(6),ke=n(0);var Ce=function(){var e=!!Object(ge.j)({path:"/",exact:!0}),t=!!Object(ge.j)("/feed"),n=!!Object(ge.j)("/profile");return Object(ke.jsx)("header",{className:ye.a.header,children:Object(ke.jsxs)("nav",{className:ye.a.container,children:[Object(ke.jsxs)("div",{className:Ee()(ye.a.block),children:[Object(ke.jsxs)(Te.b,{exact:!0,to:"/",className:Ee()(ye.a.link),activeClassName:ye.a.active,children:[Object(ke.jsx)(Se.BurgerIcon,{type:e?"primary":"secondary"}),Object(ke.jsx)("span",{className:Ee()("pl-1","mr-4","text","text_type_main-default"),children:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"})]}),Object(ke.jsxs)(Te.b,{to:"/feed",className:Ee()(ye.a.link),activeClassName:ye.a.active,children:[Object(ke.jsx)(Se.ListIcon,{type:t?"primary":"secondary"}),Object(ke.jsx)("span",{className:Ee()("pl-1","text","text_type_main-default"),children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]})]}),Object(ke.jsx)(Se.Logo,{}),Object(ke.jsxs)(Te.b,{to:"/profile",className:Ee()(ye.a.link),activeClassName:ye.a.active,children:[Object(ke.jsx)(Se.ProfileIcon,{type:n?"primary":"secondary"}),Object(ke.jsx)("span",{className:Ee()("text","text_type_main-default","pl-1"),children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"})]})]})})},Ie=n(109),we=n.n(Ie),Re=n(12),De=n(46),Ue=n.n(De),Ae=n(82),Pe=n.n(Ae),Fe=n(56),Le=n.n(Fe),Ge=function(){return Object(i.d)()},Be=i.e,qe=n(206),ze=r.a.memo((function(e){var t,n=e.el,a=Object(qe.a)({type:"product",item:n}),r=Object(Re.a)(a,2)[1],c=Be((function(e){return e.card})),s=c.counts,i=c.burger,o="bun"===n.type&&(null===(t=i.bun)||void 0===t?void 0:t._id)===n._id?2:s[n._id];return Object(ke.jsxs)("div",{ref:r,"data-cy":"ingredient",className:Le.a.card,children:[Object(ke.jsx)("img",{src:n.image,alt:n.name}),Object(ke.jsxs)("p",{className:Le.a.price,children:[Object(ke.jsx)("span",{className:"text text_type_digits-default mr-2",children:n.price}),Object(ke.jsx)(Se.CurrencyIcon,{type:"primary"})]}),Object(ke.jsx)("p",{className:Le.a.name,children:n.name}),o?Object(ke.jsx)(Se.Counter,{count:o,size:"default"}):null]},n._id)})),Me=r.a.forwardRef((function(e,t){var n=e.title,a=e.ingredients,r=Object(ge.h)();return Object(ke.jsxs)(ke.Fragment,{children:[Object(ke.jsx)("h2",{className:Ee()("text","text_type_main-medium","mb-6","mt-10"),ref:t,children:n}),Object(ke.jsx)("div",{className:Pe.a.cards,children:a.map((function(e){return Object(ke.jsx)(Te.a,{className:Pe.a.link,to:{pathname:"/ingredients/".concat(e._id),state:{background:r}},children:Object(ke.jsx)(ze,{el:e})},e._id)}))})]})})),We=function(){var e=r.a.useState("buns"),t=Object(Re.a)(e,2),n=t[0],c=t[1],s=Be((function(e){return e.card.data})),i=s.filter((function(e){return"bun"===e.type})),o=s.filter((function(e){return"sauce"===e.type})),l=s.filter((function(e){return"main"===e.type})),u=Object(a.useRef)(null),d=Object(a.useRef)(null),j=Object(a.useRef)(null),b=Object(a.useRef)(null);return Object(a.useEffect)((function(){var e,t,a;"buns"===n&&(null===d||void 0===d||null===(e=d.current)||void 0===e||e.scrollIntoView()),"sauces"===n&&(null===j||void 0===j||null===(t=j.current)||void 0===t||t.scrollIntoView()),"mains"===n&&(null===b||void 0===b||null===(a=b.current)||void 0===a||a.scrollIntoView())}),[n]),Object(ke.jsxs)("div",{children:[Object(ke.jsxs)("section",{className:Ue.a.header,children:[Object(ke.jsx)("h1",{className:Ee()(Ue.a.title,"text","text_type_main-large","mt-10"),children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(ke.jsxs)("div",{className:Ue.a.tabs,children:[Object(ke.jsx)(Se.Tab,{value:"buns",active:"buns"===n,onClick:c,children:"\u0411\u0443\u043b\u043a\u0438"}),Object(ke.jsx)(Se.Tab,{value:"sauces",active:"sauces"===n,onClick:c,children:"\u0421\u043e\u0443\u0441\u044b"}),Object(ke.jsx)(Se.Tab,{value:"mains",active:"mains"===n,onClick:c,children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"})]})]}),Object(ke.jsxs)("section",{className:Ue.a.main,ref:u,onScroll:function(){if(u&&d&&j&&b&&u.current&&d.current&&j.current&&b.current){var e=Math.abs(u.current.getBoundingClientRect().top-d.current.getBoundingClientRect().top),t=Math.abs(u.current.getBoundingClientRect().top-j.current.getBoundingClientRect().top),n=Math.abs(u.current.getBoundingClientRect().top-b.current.getBoundingClientRect().top),a=Math.min(e,t,n),r=a===e?"buns":a===t?"sauces":"mains";c((function(e){return r===e?e:r}))}},children:[Object(ke.jsx)(Me,{title:"\u0411\u0443\u043b\u043a\u0438",ingredients:i,ref:d}),Object(ke.jsx)(Me,{title:"\u0421\u043e\u0443\u0441\u044b",ingredients:o,ref:j}),Object(ke.jsx)(Me,{title:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438",ingredients:l,ref:b})]})]})},He=n(31),Je=n.n(He),Qe=n(207),Ke="https://norma.nomoreparties.space/api",Ve=n(111),Ye=n.n(Ve),Ze=function(e){var t=e.item,n=e.index,r=e.moveItem,c=e.deleteItem,s=t._id,i=Object(a.useRef)(null),o=Object(Qe.a)({accept:"item",collect:function(e){return{handlerId:e.getHandlerId()}},hover:function(e,t){var a;if(i.current){var c=e.index,s=n;if(c!==s){var o=null===(a=i.current)||void 0===a?void 0:a.getBoundingClientRect(),l=(o.bottom-o.top)/2,u=t.getClientOffset().y-o.top;c<s&&u<l||c>s&&u>l||(r(c,s),e.index=s)}}}}),l=Object(Re.a)(o,2)[1],u=Object(qe.a)({type:"item",item:function(){return{id:s,index:n}},collect:function(e){return{isDrag:e.isDragging()}}}),d=Object(Re.a)(u,2),j=d[0].isDrag?0:1;return(0,d[1])(l(i)),Object(ke.jsxs)("li",{ref:i,style:{opacity:j},className:Ee()(Ye.a.item,"mb-5"),children:[Object(ke.jsx)(Se.DragIcon,{type:"primary"}),Object(ke.jsx)(Se.ConstructorElement,{text:t.name,price:t.price,thumbnail:t.image,handleClose:c})]})},Xe=n(84),$e=n.n(Xe),et=function(){return Object(ke.jsxs)("div",{className:Ee()($e.a.container,"text","text_type_main-large"),children:[Object(ke.jsx)("h2",{className:$e.a.title,children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(ke.jsx)("p",{children:"\u041f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u044b \u0438\u0437 \u043b\u0435\u0432\u043e\u0439 \u0447\u0430\u0441\u0442\u0438 "})]})},tt=function(){var e,t=Object(ge.h)(),n=Object(ge.g)(),r=Object(Qe.a)((function(){return{accept:"product",drop:function(e){"bun"===e.type?d({type:ne,item:e}):d({type:ae,item:e}),d({type:V,item:e})},collect:function(e){return{isOver:e.isOver(),canDrop:e.canDrop()}}}})),c=Object(Re.a)(r,2),s=c[0],i=s.canDrop,o=s.isOver,l=c[1],u=i&&o?"burger-container_active":i?"burger-container_candrop":"",d=Ge(),j=Be((function(e){return e.card.burger})),b=2*((null===(e=j.bun)||void 0===e?void 0:e.price)||0);j.fillings.forEach((function(e){return b+=e.price}));var m=Object(a.useCallback)((function(e,t){d({type:X,toIndex:t,fromIndex:e})}),[d]);return Object(ke.jsx)("section",{ref:l,"data-cy":"drop-container",className:Ee()(Je.a.container,Je.a[u]),children:j.bun||j.fillings.length?Object(ke.jsxs)(ke.Fragment,{children:[j.bun&&Object(ke.jsx)("header",{className:Ee()(Je.a.element,"mb-5"),"data-cy":"bun1",children:Object(ke.jsx)(Se.ConstructorElement,{type:"top",isLocked:!0,text:"".concat(j.bun.name," (\u0432\u0435\u0440\u0445)"),price:j.bun.price,thumbnail:j.bun.image})}),Object(ke.jsx)("ul",{className:Je.a.list,"data-cy":"fillings",children:j.fillings.map((function(e,t){return Object(ke.jsx)(Ze,{deleteItem:function(){d({type:Y,key:e._id,typeItem:e.type}),d({type:Z,id:e.productId})},index:t,item:e,moveItem:m},e.productId)}))}),j.bun&&Object(ke.jsx)("div",{className:Ee()(Je.a.element,"mb-10"),"data-cy":"bun2",children:Object(ke.jsx)(Se.ConstructorElement,{type:"bottom",isLocked:!0,text:"".concat(j.bun.name," (\u043d\u0438\u0437)"),price:j.bun.price,thumbnail:j.bun.image})}),Object(ke.jsxs)("div",{className:Je.a.total,children:[Object(ke.jsxs)("div",{className:Ee()(Je.a.price,"mr-10"),children:[Object(ke.jsx)("span",{className:"text text_type_digits-default mr-2",children:b}),Object(ke.jsx)(Se.CurrencyIcon,{type:"primary"})]}),j.bun&&Object(ke.jsx)(Se.Button,{type:"primary",size:"large",onClick:function(){var e=[].concat(Object(J.a)(j.fillings.map((function(e){return e._id}))),[j.bun,j.bun]);d(function(e){return function(t){t({type:re}),fetch("".concat(Ke,"/orders"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+de("token")},body:JSON.stringify({ingredients:e})}).then((function(e){if(e.ok)return e.json();throw new Error("\u043e\u0448\u0438\u0431\u043a\u0430: "+e.status)})).then((function(e){e&&e.success?t({type:ce,data:e.order}):t({type:se})})).catch((function(e){t({type:se})}))}}(e)),n.push({pathname:"/",state:{background:t}})},children:"\u041d\u0430\u0436\u043c\u0438 \u043d\u0430 \u043c\u0435\u043d\u044f"})]})]}):Object(ke.jsx)(et,{})})},nt=n(205),at=n(117),rt=n(112),ct=n.n(rt),st=function(){return Object(ke.jsx)("div",{className:ct.a.loader})},it=function(){var e=Be((function(e){return e.card})),t=e.data,n=e.isLoading,a=e.hasError;return Object(ke.jsxs)("section",{className:we.a.main,children:[n&&Object(ke.jsx)(st,{}),a&&"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430",!n&&!a&&t.length&&Object(ke.jsxs)(nt.a,{backend:at.a,children:[Object(ke.jsx)(We,{}),Object(ke.jsx)(tt,{})]})]})},ot=n(113),lt=n.n(ot),ut=function(){return Object(ke.jsxs)(ke.Fragment,{children:[Object(ke.jsx)("h1",{children:"Oops! 404 Error"}),Object(ke.jsx)("p",{children:"The page you requested does not exist"})]})},dt=n(86),jt=n.n(dt),bt=n(114),mt=function(e){return e.ok?e.json():Promise.reject(e)},_t=function(){return fetch("".concat(Ke,"/auth/token"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:localStorage.getItem("refreshToken")})}).then(mt)},pt=function(){var e=Object(bt.a)(jt.a.mark((function e(t,n){var a;return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,n);case 3:return a=e.sent,e.next=6,mt(a);case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",e.t0.json().then((function(e){return console.log(e),"jwt expired"===(null===e||void 0===e?void 0:e.message)?_t().then((function(e){localStorage.setItem("refreshToken",e.refreshToken);var a=e.accessToken.split("Bearer ")[1];return je("token",a),n.headers.Authorization=e.accessToken,fetch(t,n).then((function(e){return mt(e)}))})):(be("token"),localStorage.removeItem("refreshToken"),location.reload(),Promise.reject(e))})));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),Ot=n(14),xt=function(e){return function(t){t({type:d}),function(e){var t=e.email,n=e.password,a=e.name;return fetch("".concat(Ke,"/auth/register"),{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:n,name:a}),redirect:"follow",referrerPolicy:"no-referrer"}).then((function(e){return mt(e)}))}(e).then((function(e){if(console.log(e.user),e&&e.success){var n=e.accessToken.split("Bearer ")[1],a=e.refreshToken;je("token",n),localStorage.setItem("refreshToken",a),t({type:j,user:e.user}),t(Object(Ot.d)("/"))}else t({type:b})})).catch((function(e){t({type:b,error:e.message})}))}},ft=function(e){return function(t){t({type:m}),function(e){var t=e.name,n=e.password;return fetch("".concat(Ke,"/auth/login"),{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:n})}).then((function(e){return mt(e)}))}(e).then((function(e){if(e&&e.success){var n=e.accessToken.split("Bearer ")[1],a=e.refreshToken;je("token",n),localStorage.setItem("refreshToken",a),t({type:_,user:e.user})}else t({type:p})})).catch((function(e){console.log(e),t({type:p})}))}},ht=function(e){return function(t){var n;t({type:O}),(n=e,fetch("".concat(Ke,"/password-reset"),{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n}),redirect:"follow",referrerPolicy:"no-referrer"}).then((function(e){return mt(e)}))).then((function(e){t({type:f}),t(Object(Ot.d)("/reset-password"))})).catch((function(e){console.log(e),t({type:x})}))}},gt=function(){return function(e){e({type:h}),pt("".concat(Ke,"/auth/user"),{mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+de("token")},redirect:"follow",referrerPolicy:"no-referrer"}).then((function(t){if(!t||!t.success)throw t;console.log(t),e({type:g,user:t.user})})).catch((function(t){console.log(t),e({type:v})}))}},vt=function(e){return function(t){t({type:y}),function(e){return console.log(de("token")),fetch("".concat(Ke,"/auth/user"),{method:"PATCH",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+de("token")},body:JSON.stringify(e),redirect:"follow",referrerPolicy:"no-referrer"}).then((function(e){return mt(e)}))}(e).then((function(e){if(!e||!e.success)throw e;t({type:N,user:e.user})})).catch((function(e){console.log(e),t({type:E})}))}},yt=function(){return function(e){e({type:S}),fetch("".concat(Ke,"/auth/logout"),{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:localStorage.getItem("refreshToken")}),redirect:"follow",referrerPolicy:"no-referrer"}).then((function(e){return mt(e)})).then((function(t){t&&t.success?(be("token"),localStorage.removeItem("refreshToken"),e({type:T})):e({type:k})})).catch((function(t){e({type:k})}))}},Nt=n(47),Et=n.n(Nt);var St=function(){var e=Object(a.useState)({name:"",password:""}),t=Object(Re.a)(e,2),n=t[0],r=t[1],c=function(e){var t=e.target,a=t.value,c=t.name;r(Object(u.a)(Object(u.a)({},n),{},Object(Q.a)({},c,a)))},s=Ge(),i=localStorage.getItem("refreshToken");return Be((function(e){return e.auth.name}))||i?Object(ke.jsx)(ge.a,{to:{pathname:"/"}}):Object(ke.jsxs)("section",{className:Ee()(Et.a.main,"mt-30"),children:[Object(ke.jsxs)("form",{onSubmit:function(e){e.preventDefault(),s(ft(n))},className:Et.a.form,children:[Object(ke.jsx)("h1",{className:"text text_type_main-large mb-6",children:"\u0412\u0445\u043e\u0434"}),Object(ke.jsx)(Se.Input,{type:"email",placeholder:"E-mail",onChange:c,value:n.name,name:"name",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"}),Object(ke.jsx)(Se.PasswordInput,{onChange:c,value:n.password,name:"password"}),Object(ke.jsx)(Se.Button,{type:"primary",size:"large",children:"\u0412\u043e\u0439\u0442\u0438"})]}),Object(ke.jsxs)("p",{className:"text text_type_main-default text_color_inactive mt-20",children:["\u0412\u044b - \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?",Object(ke.jsx)(Te.a,{to:"/register",type:"secondary",className:Ee()(Et.a.link,"ml-2"),children:"\u0417\u0430\u0440\u0435\u0433\u0435\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})," "]}),Object(ke.jsxs)("p",{className:"text text_type_main-default text_color_inactive mt-4",children:["\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",Object(ke.jsx)(Te.a,{to:"/forgot-password",type:"secondary",className:Ee()(Et.a.link,"ml-2"),children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})},Tt=n(57),kt=n.n(Tt);var Ct=function(){var e=Object(a.useState)({name:"",email:"",password:""}),t=Object(Re.a)(e,2),n=t[0],r=t[1],c=function(e){var t=e.target,a=t.value,c=t.name;r(Object(u.a)(Object(u.a)({},n),{},Object(Q.a)({},c,a)))},s=Ge();return localStorage.getItem("refreshToken")?Object(ke.jsx)(ge.a,{to:{pathname:"/"}}):Object(ke.jsxs)("section",{className:Ee()(kt.a.main,"mt-30"),children:[Object(ke.jsxs)("form",{onSubmit:function(e){e.preventDefault(),s(xt(n))},className:kt.a.form,children:[Object(ke.jsx)("h1",{className:"text text_type_main-large mb-6",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(ke.jsx)(Se.Input,{type:"text",placeholder:"\u0418\u043c\u044f",onChange:c,value:n.name,name:"name",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"}),Object(ke.jsx)(Se.Input,{type:"email",placeholder:"E-mail",onChange:c,value:n.email,name:"email",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"}),Object(ke.jsx)(Se.PasswordInput,{onChange:c,value:n.password,name:"password"}),Object(ke.jsx)(Se.Button,{type:"primary",size:"large",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(ke.jsxs)("p",{className:"text text_type_main-default text_color_inactive mt-20",children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?",Object(ke.jsx)(Te.a,{to:"/login",type:"secondary",className:Ee()(kt.a.link,"ml-2"),children:"\u0412\u043e\u0439\u0442\u0438"})]})]})},It=n(58),wt=n.n(It),Rt=function(){var e=Object(a.useState)(""),t=Object(Re.a)(e,2),n=t[0],r=t[1],c=Ge();return localStorage.getItem("refreshToken")?Object(ke.jsx)(ge.a,{to:{pathname:"/"}}):Object(ke.jsxs)("section",{className:Ee()(wt.a.main,"mt-30"),children:[Object(ke.jsxs)("form",{onSubmit:function(e){e.preventDefault(),c(ht(n))},className:wt.a.form,children:[Object(ke.jsx)("h1",{className:"text text_type_main-large mb-6",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(ke.jsx)(Se.Input,{type:"email",placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 e-mail",value:n,onChange:function(e){return r(e.target.value)}}),Object(ke.jsx)(Se.Button,{type:"primary",size:"large",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})]}),Object(ke.jsxs)("p",{className:"text text_type_main-default text_color_inactive mt-20",children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",Object(ke.jsx)(Te.a,{to:"/login",type:"secondary",className:Ee()(wt.a.link,"ml-2"),children:"\u0412\u043e\u0439\u0442\u0438"})]})]})},Dt=n(59),Ut=n.n(Dt);var At=function(){var e=Object(a.useState)({password:"",token:""}),t=Object(Re.a)(e,2),n=t[0],r=t[1],c=function(e){var t=e.target,a=t.value,c=t.name;r(Object(u.a)(Object(u.a)({},n),{},Object(Q.a)({},c,a)))};return localStorage.getItem("refreshToken")?Object(ke.jsx)(ge.a,{to:{pathname:"/"}}):Object(ke.jsxs)("section",{className:Ee()(Ut.a.main,"mt-30"),children:[Object(ke.jsxs)("form",{onSubmit:function(e){e.preventDefault(),function(e){var t=e.token,n=e.password;fetch("".concat(Ke,"/password-reset/reset"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t,password:n})}).then((function(e){if(e.ok)return e.json();throw new Error("\u043e\u0448\u0438\u0431\u043a\u0430: "+e.status)})).then((function(e){return mt(e)}))}(n)},className:Ut.a.form,children:[Object(ke.jsx)("h1",{className:"text text_type_main-large mb-6",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(ke.jsx)(Se.PasswordInput,{value:n.password,name:"password",onChange:c}),Object(ke.jsx)(Se.Input,{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",onChange:c,value:n.token,name:"token",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"}),Object(ke.jsx)(Se.Button,{type:"primary",size:"large",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]}),Object(ke.jsxs)("p",{className:"text text_type_main-default text_color_inactive mt-20",children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",Object(ke.jsx)(Te.a,{to:"/login",type:"secondary",className:Ee()(Ut.a.link,"ml-2"),children:"\u0412\u043e\u0439\u0442\u0438"})]})]})},Pt=n(24),Ft=n.n(Pt),Lt=function(e){var t=e.orders,n=e.total,a=e.totalToday,r=null===t||void 0===t?void 0:t.filter((function(e){return"done"===e.status})),c=null===t||void 0===t?void 0:t.filter((function(e){return"done"!==e.status}));return Object(ke.jsxs)("section",{className:"mt-25",children:[Object(ke.jsxs)("div",{className:Ft.a.table,children:[Object(ke.jsxs)("div",{className:Ft.a.ready,children:[Object(ke.jsx)("h2",{className:Ee()(Ft.a.title,"text text_type_main-medium mb-6"),children:"\u0413\u043e\u0442\u043e\u0432\u044b:"}),Object(ke.jsx)("ul",{className:Ft.a.list,children:null===r||void 0===r?void 0:r.map((function(e){return Object(ke.jsx)("li",{className:Ee()(Ft.a.text,"text text_type_digits-default mb-2"),children:e.number},e._id)}))})]}),Object(ke.jsxs)("div",{className:Ft.a.progress,children:[Object(ke.jsx)("h2",{className:"text text_type_main-medium mb-6",children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:"}),Object(ke.jsx)("ul",{className:Ft.a.list,children:null===c||void 0===c?void 0:c.map((function(e){return Object(ke.jsx)("li",{className:Ee()(Ft.a.text,"text text_type_digits-default mb-2"),children:e.number},e._id)}))})]})]}),Object(ke.jsxs)("div",{className:"mb-15",children:[Object(ke.jsx)("h2",{className:"text text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f:"}),Object(ke.jsxs)("p",{className:Ee()(Ft.a.num,"text text_type_digits-large"),children:[n," "]})]}),Object(ke.jsxs)("div",{className:"",children:[Object(ke.jsx)("h2",{className:"text text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"}),Object(ke.jsx)("p",{className:Ee()(Ft.a.num,"text text_type_digits-large"),children:a})]})]})},Gt=n(27),Bt=n.n(Gt),qt=n(60),zt=n.n(qt),Mt=function(e){var t=e.image;return Object(ke.jsx)("section",{className:zt.a.main,children:Object(ke.jsx)("div",{className:zt.a.img,children:Object(ke.jsx)("img",{className:zt.a.icon,src:t,alt:"\u0444\u043e\u0442\u043e"})})})},Wt=function(e){var t=new Date(e),n=new Date;n.setHours(0,0,0,0);var a,r=Math.ceil((Number(n)-Number(t))/864e5),c=t.getHours()>9?t.getHours():"0".concat(t.getHours()),s=t.getMinutes()>9?t.getMinutes():"0".concat(t.getMinutes());return"".concat((a=r,0===a?"\u0421\u0435\u0433\u043e\u0434\u043d\u044f":1===a?"\u0412\u0447\u0435\u0440\u0430":a>1?"".concat(a," \u0434\u043d\u044f(-\u0435\u0439) \u043d\u0430\u0437\u0430\u0434"):"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a"),", ").concat(c,":").concat(s," i-GMT+").concat(-1*t.getTimezoneOffset()/60)},Ht=function(e){return"done"===e?{text:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d",colorText:"green"}:"pending"===e?{text:"\u041e\u0442\u043c\u0435\u043d\u0435\u043d",colorText:"red"}:{text:"\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f",colorText:"white"}},Jt=function(e){var t=e.el,n=e.data,a=t.status,r=Ht(a),c=null===t||void 0===t?void 0:t.ingredients.map((function(e){return null===n||void 0===n?void 0:n.filter((function(t){return t._id===e}))})).flat(),s=6,i=null===c||void 0===c?void 0:c.reduce((function(e,t){return e+t.price}),0),o=Wt(null===t||void 0===t?void 0:t.createdAt),l=c.length,u=l-s,d=c.slice(0,s);return Object(ke.jsx)("section",{className:Bt.a.main,children:Object(ke.jsxs)("div",{className:"p-6",children:[Object(ke.jsxs)("div",{className:Bt.a.data,children:[Object(ke.jsxs)("span",{className:"text text_type_digits-default",children:["#",null===t||void 0===t?void 0:t.number]}),Object(ke.jsx)("div",{className:"text text_type_main-default text_color_inactive",children:o})]}),Object(ke.jsx)("h2",{className:"text text_type_main-medium mt-6 mb-2",children:null===t||void 0===t?void 0:t.name}),Object(ke.jsx)("h2",{className:Ee()(Bt.a["status_color_".concat(r.colorText)],"text text_type_main-default mb-26"),children:r.text}),Object(ke.jsxs)("div",{className:Bt.a.footer,children:[Object(ke.jsxs)("ul",{className:Bt.a.container,children:[null===d||void 0===d?void 0:d.map((function(e,t){return s-=1,Object(ke.jsx)("li",{className:Bt.a.item,style:{zIndex:s},children:Object(ke.jsx)(Mt,{image:null===e||void 0===e?void 0:e.image_mobile})},t)})),l>6?Object(ke.jsx)("div",{className:Bt.a.overlay,children:Object(ke.jsx)("span",{children:"+".concat(u)})}):null]}),Object(ke.jsxs)("div",{className:Bt.a.price,children:[Object(ke.jsx)("div",{className:"text text_type_digits-default mr-2",children:i}),Object(ke.jsx)(Se.CurrencyIcon,{type:"primary"})]})]})]})})},Qt=n(87),Kt=n.n(Qt),Vt=function(e){var t=e.orders,n=e.data,a=Object(ge.h)();return Object(ke.jsxs)("section",{className:Ee()(Kt.a.main,"mt-10"),children:[Object(ke.jsx)("h1",{className:"text text_type_main-large mb-5",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),null===t||void 0===t?void 0:t.map((function(e){return Object(ke.jsx)(Te.a,{className:Kt.a.link,to:{pathname:"/feed/".concat(e.number),state:{background:a}},children:Object(ke.jsx)(Jt,{data:n,el:e})},e._id)}))]})},Yt=n(115),Zt=n.n(Yt),Xt=function(){var e=Ge(),t=Be((function(e){return e.card.data}));Object(a.useEffect)((function(){e({type:L})}),[e]);var n=Be((function(e){return e.ws.orders})),r=Be((function(e){return e.ws.total})),c=Be((function(e){return e.ws.totalToday}));return Object(ke.jsxs)("section",{className:Ee()(Zt.a.main,"mt-10"),children:[Object(ke.jsx)(Vt,{data:t,orders:n}),Object(ke.jsx)(Lt,{orders:n,total:r,totalToday:c})]})},$t=n(23),en=n.n($t),tn=n(88),nn=n.n(tn),an=function(){var e=Ge(),t=Be((function(e){return e.card})).data;Object(a.useEffect)((function(){e({type:W})}),[e]);var n=Be((function(e){return e.wsAuth.orders})),r=Object(ge.h)();return Object(ke.jsx)("div",{className:nn.a.burgers,children:null===n||void 0===n?void 0:n.map((function(e,n){return Object(ke.jsx)(Te.a,{to:{pathname:"/profile/orders/".concat(e.number),state:{background:r}},className:nn.a.burgerlink,children:Object(ke.jsx)(Jt,{el:e,data:t})},n)}))})},rn=function(){var e=Object(a.useState)({name:"",email:"",password:"",nameDisabled:!0,emailDisabled:!0,passwordDisabled:!0}),t=Object(Re.a)(e,2),n=t[0],c=t[1],s=Ge(),i=Be((function(e){return e.auth.name})),o=Be((function(e){return e.auth.email}));Object(a.useEffect)((function(){s(gt())}),[s]),Object(a.useEffect)((function(){c((function(e){return Object(u.a)(Object(u.a)({},e),{},{name:i,email:o})}))}),[i,o]);var l=function(e){var t=e.target,a=t.value,r=t.name;c(Object(u.a)(Object(u.a)({},n),{},Object(Q.a)({},r,a)))},d=r.a.useRef(null),j=r.a.useRef(null),b=r.a.useRef(null),m=n.nameDisabled?"EditIcon":"CloseIcon",_=n.emailDisabled?"EditIcon":"CloseIcon",p=n.passwordDisabled?"EditIcon":"CloseIcon";return Object(ke.jsxs)("section",{className:Ee()(en.a.main,"mt-30"),children:[Object(ke.jsxs)("div",{className:en.a.menu,children:[Object(ke.jsx)(Te.b,{to:"/profile",exact:!0,activeClassName:en.a.active,className:Ee()(en.a.link,"text text_type_main-large mb-6"),children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}),Object(ke.jsx)(Te.b,{to:"/profile/orders",exact:!0,activeClassName:en.a.active,className:Ee()(en.a.link,"text text_type_main-large mb-6"),children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(ke.jsx)(Te.b,{to:"/",exact:!0,activeClassName:en.a.active,onClick:function(){s(yt())},className:Ee()(en.a.link,"text text_type_main-large mb-6"),children:"\u0412\u044b\u0445\u043e\u0434"}),Object(ke.jsx)("p",{className:"text text_type_main-default text_color_inactive mt-20",children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0435\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"})]}),Object(ke.jsx)("div",{className:Ee()(en.a.inputs,"ml-15"),children:Object(ke.jsxs)(ge.d,{children:[Object(ke.jsx)(ge.b,{path:"/profile",exact:!0,children:Object(ke.jsxs)("form",{className:en.a.inputs,onSubmit:function(e){e.preventDefault();var t={};t=n.name!==i?Object(u.a)(Object(u.a)({},t),{},{name:n.name}):t,t=n.email!==o?Object(u.a)(Object(u.a)({},t),{},{email:n.email}):t,t=0!==n.password.length?Object(u.a)(Object(u.a)({},t),{},{password:n.password}):t,console.log(Object(u.a)({},t)),s(vt(Object(u.a)({},t))),c(Object(u.a)(Object(u.a)({},n),{},{password:"",nameDisabled:!0,emailDisabled:!0,passwordDisabled:!0}))},children:[Object(ke.jsx)(Se.Input,{type:"text",placeholder:"\u0418\u043c\u044f",size:"default",onChange:l,value:n.name,name:"name",errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",disabled:n.nameDisabled,onIconClick:function(){c(Object(u.a)(Object(u.a)({},n),{},{nameDisabled:!n.nameDisabled})),d&&d.current&&(d.current.disabled=!1),setTimeout((function(){return d&&d.current&&d.current.focus()}),0)},icon:m,ref:d}),Object(ke.jsx)(Se.Input,{type:"email",placeholder:"\u041f\u043e\u0447\u0442\u0430",size:"default",onChange:l,value:n.email,name:"email",errorText:"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 email",icon:_,disabled:n.emailDisabled,ref:j,onIconClick:function(){c(Object(u.a)(Object(u.a)({},n),{},{emailDisabled:!n.emailDisabled})),j&&j.current&&(j.current.disabled=!1),setTimeout((function(){return j&&j.current&&j.current.focus()}),0)}}),Object(ke.jsx)(Se.Input,{name:"password",type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",size:"default",onChange:l,value:n.password,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0432 \u043f\u0430\u0440\u043e\u043b\u0435",icon:p,ref:b,onIconClick:function(){c(Object(u.a)(Object(u.a)({},n),{},{passwordDisabled:!n.passwordDisabled})),b&&b.current&&(b.current.disabled=!1),setTimeout((function(){return b&&b.current&&b.current.focus()}),0)},disabled:n.passwordDisabled}),n.name!==i||n.email!==o||0!==n.password.length?Object(ke.jsxs)("div",{className:en.a.button,children:[Object(ke.jsx)(Se.Button,{type:"secondary",size:"large",children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(ke.jsx)(Se.Button,{type:"primary",size:"large",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]}):null]})}),Object(ke.jsx)(ge.b,{path:"/profile/orders",exact:!0,children:Object(ke.jsx)(an,{})})]})})]})},cn=n(26),sn=n.n(cn),on=n(48),ln=n.n(on),un=function(e){var t=e.el,n=e.count;return Object(ke.jsxs)("section",{className:ln.a.main,children:[Object(ke.jsxs)("div",{className:ln.a.name,children:[Object(ke.jsx)(Mt,{image:t.image_mobile}),Object(ke.jsx)("p",{className:Ee()(ln.a.name,"ml-9 text text_type_main-default"),children:t.name})]}),Object(ke.jsxs)("div",{className:ln.a.total,children:[Object(ke.jsxs)("span",{className:"mr-2 text text_type_digits-default",children:[n," X"]}),Object(ke.jsx)("span",{className:"mr-2 text text_type_digits-default",children:t.price}),Object(ke.jsx)(Se.CurrencyIcon,{type:"primary"})]})]})};var dn=function(){var e=Ge(),t=!!Object(ge.j)("/profile"),n=Object(ge.i)().id,r=Be((function(e){return e.card})).data;Object(a.useEffect)((function(){e(t?{type:W}:{type:L})}),[e,t]);var c=function(e,t){return null===e||void 0===e?void 0:e.filter((function(e){return e.number===Number(t)}))[0]}(Be((function(e){return t?e.wsAuth.orders:e.ws.orders})),n)||null,s=null===c||void 0===c?void 0:c.ingredients.reduce((function(e,t){return e[t]=(e[t]||0)+1,e}),{}),i=(s?Object.keys(s):[]).map((function(e){return r.filter((function(t){return t._id===e}))})).flat(),o=null===c||void 0===c?void 0:c.status,l=Ht(o),u=Wt(null===c||void 0===c?void 0:c.createdAt),d=i.reduce((function(e,t){return e+t.price*s[t._id]}),0);return Object(ke.jsx)("section",{className:sn.a.main,children:Object(ke.jsxs)("div",{children:[Object(ke.jsxs)("span",{className:Ee()(sn.a.span,"text text_type_digits-default"),children:["#",n]}),Object(ke.jsx)("h1",{className:Ee()(sn.a.title,"text text_type_main-medium mt-10"),children:null===c||void 0===c?void 0:c.name}),Object(ke.jsx)("p",{className:Ee()(sn.a.status,"mt-3 mb-15"),children:l.text}),Object(ke.jsx)("h3",{className:Ee()(sn.a.structure,"text text_type_main-medium mb-6"),children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(ke.jsx)("ul",{className:Ee()(sn.a.ingrid),children:i.map((function(e,t){return Object(ke.jsx)("li",{className:Ee()(sn.a.item,"mr-5"),children:Object(ke.jsx)(un,{count:s[e._id],el:e})},t)}))}),Object(ke.jsxs)("div",{className:sn.a.total,children:[Object(ke.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:u}),Object(ke.jsxs)("div",{className:sn.a.sum,children:[Object(ke.jsx)("p",{className:"mr-2 text text_type_digits-default",children:d}),Object(ke.jsx)(Se.CurrencyIcon,{type:"primary"})]})]})]})})},jn=function(){return localStorage.getItem("refreshToken")},bn=function(e){var t=e.children,n=Object(ue.a)(e,["children"]),r=Ge(),c=!!jn(),s=Be((function(e){return e.auth.isTokenUpdated})),i=Be((function(e){return e.auth.tokenUpdateDate}));return Object(a.useEffect)((function(){c&&!s&&r((function(e){e({type:C}),_t().then((function(t){if(t&&t.success){localStorage.setItem("refreshToken",t.refreshToken);var n=t.accessToken.split("Bearer ")[1];je("token",n),e({type:I})}else e({type:w})}))}))}),[r,c,s]),c&&!s?Object(ke.jsx)(st,{}):Object(ke.jsx)(ge.b,Object(u.a)(Object(u.a)({},n),{},{render:function(e){var n=e.location;return c&&i?t:Object(ke.jsx)(ge.a,{to:{pathname:"/login",state:{from:n}}})}}))},mn=n(116),_n=n.n(mn),pn=function(e){var t=e.close;return Object(ke.jsx)("div",{className:_n.a.overlay,onClick:t})},On=n(89),xn=n.n(On),fn=document.getElementById("portal"),hn=function(e){var t=e.children,n=Object(ge.g)(),a=function(e){"Escape"===e.code&&c()};r.a.useEffect((function(){return window.addEventListener("keydown",a),function(){window.removeEventListener("keydown",a)}}));var c=function(){n.goBack()};return fn&&s.a.createPortal(Object(ke.jsxs)(ke.Fragment,{children:[Object(ke.jsxs)("div",{className:Ee()(xn.a.modal,"pr-15","pl-15","pt-20","pb-15"),children:[Object(ke.jsx)("div",{className:xn.a.close,onClick:c,children:Object(ke.jsx)(Se.CloseIcon,{type:"primary"})}),Object(ke.jsx)("div",{children:t})]}),Object(ke.jsx)(pn,{close:c})]}),fn)},gn=n(11),vn=n.n(gn),yn=function(){var e=Object(ge.i)().id,t=Be((function(e){return e.card})),n=t.isLoading,a=t.hasError,r=Be((function(e){return e.card.data})).find((function(t){return t._id===e}));return Object(ke.jsxs)("div",{className:vn.a.ingredient,children:[Object(ke.jsx)("h1",{className:Ee()(vn.a.title,"text","text_type_main-large","mb-5"),children:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"}),n&&Object(ke.jsx)(st,{}),a&&"\u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430",r&&Object(ke.jsxs)("div",{className:vn.a.container,children:[Object(ke.jsx)("img",{className:vn.a.container__image,src:r.image,alt:"\u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442"}),Object(ke.jsx)("h2",{className:Ee()(vn.a.container__subtitle,"text","text_type_main-medium"),children:r.name}),Object(ke.jsx)("p",{className:Ee()(vn.a.container__subtitle,"mb-8","mt-8","text","text_type_main-default"),children:"\u041f\u0440\u0435\u0432\u043e\u0441\u0445\u043e\u0434\u043d\u044b\u0435 \u043a\u043e\u0442\u043b\u0435\u0442\u044b \u0438\u0437 \u043c\u0430\u0440\u0441\u0438\u0430\u043d\u0441\u043a\u043e\u0439 \u041c\u0430\u0433\u043d\u043e\u043b\u0438\u0438 \u0434\u043b\u044f \u0444\u0438\u0440\u043c\u0435\u043d\u043d\u044b\u0445 \u043a\u043e\u0441\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0431\u0443\u0440\u0433\u0435\u0440\u043e\u0432, \u043d\u0430\u0431\u0438\u0440\u0430\u044e\u0449\u0438\u0445 \u043f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u043e\u0441\u0442\u044c \u043f\u043e \u0432\u0441\u0435\u0439 \u0432\u0441\u0435\u043b\u0435\u043d\u043d\u043e\u0439."}),Object(ke.jsxs)("ul",{className:Ee()(vn.a.box,"mt-8"),children:[Object(ke.jsxs)("li",{className:Ee()(vn.a.box__item,"text","text_type_main-default","text_color_inactive"),children:[Object(ke.jsx)("p",{className:vn.a.box__text,children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438, \u043a\u043a\u0430\u043b"}),Object(ke.jsx)("p",{className:Ee()(vn.a.box__sum,"text_type_digits-default"),children:r.calories})]}),Object(ke.jsxs)("li",{className:Ee()(vn.a.box__item,"text","text_type_main-default","text_color_inactive"),children:[Object(ke.jsx)("p",{className:vn.a.box__text,children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(ke.jsx)("p",{className:Ee()(vn.a.box__sum,"text_type_digits-default"),children:r.proteins})]}),Object(ke.jsxs)("li",{className:Ee()(vn.a.box__item,"text","text_type_main-default","text_color_inactive"),children:[Object(ke.jsx)("p",{className:vn.a.box__text,children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(ke.jsx)("p",{className:Ee()(vn.a.box__sum,"text_type_digits-default"),children:r.fat})]}),Object(ke.jsxs)("li",{className:Ee()(vn.a.box__item,"text","text_type_main-default","text_color_inactive"),children:[Object(ke.jsx)("p",{className:vn.a.box__text,children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(ke.jsx)("p",{className:Ee()(vn.a.box__sum,"text_type_digits-default"),children:r.carbohydrates})]})]})]})]})},Nn=n(32),En=n.n(Nn),Sn=n.p+"static/media/graphics.fb9f8534.svg",Tn=function(){var e=Be((function(e){return e.card})),t=e.currentOrder,n=e.orderIsLoading,a=e.orderHasError;return Object(ke.jsxs)("div",{className:En.a.order,children:[n&&Object(ke.jsx)(st,{}),a&&"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430",!n&&!a&&Object(ke.jsxs)(ke.Fragment,{children:[Object(ke.jsx)("h1",{className:Ee()(En.a.order__title,"text","text_type_digits-large","pt-6"),children:null===t||void 0===t?void 0:t.number}),Object(ke.jsx)("p",{className:Ee()(En.a.order__subtitle,"text","text_type_main-medium","pb-15"),children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(ke.jsx)("img",{className:Ee()(En.a.order__image,"pb-15"),src:Sn,alt:"ll"}),Object(ke.jsx)("p",{className:Ee()(En.a.order__subtitle,"text","text_type_main-default"),children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(ke.jsx)("p",{className:Ee()(En.a.order__subtitle,"text","text_type_main-default","text_color_inactive"),children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})]})};var kn=function(){var e=Object(ge.h)(),t=Ge(),n=Object(ge.g)(),a=("PUSH"===n.action||"REPLACE"===n.action)&&e.state&&e.state.background,c=!!jn(),s=Be((function(e){return e.auth.isforgotPasswordSaccess})),i=Be((function(e){return e.card})).dataReceived;return r.a.useEffect((function(){i||t((function(e){e({type:ee}),fetch("".concat(Ke,"/ingredients")).then((function(e){if(e.ok)return e.json();throw new Error("\u043e\u0448\u0438\u0431\u043a\u0430: "+e.status)})).then((function(t){t&&t.success?e({type:te,data:t.data}):e({type:$})})).catch((function(t){e({type:$})}))}))}),[t,i]),Object(ke.jsxs)("div",{className:lt.a.container,children:[Object(ke.jsx)(Ce,{}),Object(ke.jsxs)(ge.d,{location:a||e,children:[Object(ke.jsx)(ge.b,{path:"/",exact:!0,children:Object(ke.jsx)(it,{})}),Object(ke.jsxs)(ge.b,{path:"/login",exact:!0,children:[c&&Object(ke.jsx)(ge.a,{to:"/"}),Object(ke.jsx)(St,{})]}),Object(ke.jsxs)(ge.b,{path:"/register",exact:!0,children:[c&&Object(ke.jsx)(ge.a,{to:"/"}),Object(ke.jsx)(Ct,{})]}),Object(ke.jsxs)(ge.b,{path:"/forgot-password",exact:!0,children:[!c&&Object(ke.jsx)(ge.a,{to:"/"}),Object(ke.jsx)(Rt,{})]}),Object(ke.jsxs)(ge.b,{path:"/reset-password",exact:!0,children:[!c&&!s&&Object(ke.jsx)(ge.a,{to:"/"}),Object(ke.jsx)(At,{})]}),Object(ke.jsx)(ge.b,{path:"/feed",exact:!0,children:Object(ke.jsx)(Xt,{})}),Object(ke.jsx)(ge.b,{path:"/feed/:id",exact:!0,children:Object(ke.jsx)(dn,{})}),Object(ke.jsx)(bn,{path:"/profile/orders/:id",exact:!0,children:Object(ke.jsx)(dn,{})}),Object(ke.jsx)(bn,{path:"/profile",children:Object(ke.jsx)(rn,{})}),Object(ke.jsx)(ge.b,{path:"/ingredients/:id",exact:!0,children:Object(ke.jsx)(yn,{})}),Object(ke.jsx)(ge.b,{children:Object(ke.jsx)(ut,{})})]}),a&&Object(ke.jsxs)(ke.Fragment,{children:[Object(ke.jsx)(bn,{exact:!0,path:"/",children:Object(ke.jsx)(hn,{children:Object(ke.jsx)(Tn,{})})}),Object(ke.jsx)(ge.b,{path:"/ingredients/:id",children:Object(ke.jsx)(hn,{children:Object(ke.jsx)(yn,{})})}),Object(ke.jsx)(bn,{path:"/profile/orders/:id",children:Object(ke.jsx)(hn,{children:Object(ke.jsx)(dn,{})})}),Object(ke.jsx)(ge.b,{path:"/feed/:id",children:Object(ke.jsx)(hn,{children:Object(ke.jsx)(dn,{})})})]})]})},Cn=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,209)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))};s.a.render(Object(ke.jsx)(r.a.StrictMode,{children:Object(ke.jsx)(i.a,{store:he,children:Object(ke.jsx)(o.a,{history:oe,children:Object(ke.jsx)(kn,{})})})}),document.getElementById("root")),Cn()},23:function(e,t,n){e.exports={main:"profile_main__1sGd2",inputs:"profile_inputs__hbbDw",menu:"profile_menu__24zgt",link:"profile_link__3xYpx",active:"profile_active__2IWt7",burgers:"profile_burgers__3q9iv",button:"profile_button__37pj3"}},24:function(e,t,n){e.exports={table:"orders_table__3Cvfv",num:"orders_num__207Su",text:"orders_text__7YYMd",list:"orders_list__18yYb"}},25:function(e,t,n){e.exports={header:"app-header_header__3eeK0",container:"app-header_container__2d3LV",block:"app-header_block__3qA_R",link:"app-header_link__QB-ZG",active:"app-header_active__1xPq8"}},26:function(e,t,n){e.exports={main:"item-detail_main__aUkCx",link:"item-detail_link__74zFp",form:"item-detail_form__2dr3N",total:"item-detail_total__1jDeM",sum:"item-detail_sum__2rgkX",status:"item-detail_status__2ceza",span:"item-detail_span__3q8eE",ingrid:"item-detail_ingrid__3N6ln"}},27:function(e,t,n){e.exports={data:"burger_data__2QvOl",footer:"burger_footer__32KUu",main:"burger_main__39hFE",price:"burger_price__PcvJ_",image:"burger_image__1W73Y",container:"burger_container__jruag",link:"burger_link__2Iywf",status_color_red:"burger_status_color_red__3bTQk",status_color_green:"burger_status_color_green__2GlRZ",status_color_white:"burger_status_color_white__QVp5W",overlay:"burger_overlay__odWhp"}},31:function(e,t,n){e.exports={item:"burger-constructor_item__3W_JC","burger-container_active":"burger-constructor_burger-container_active__39Etn","burger-container_candrop":"burger-constructor_burger-container_candrop__1-Jic",container:"burger-constructor_container__2p0YN",list:"burger-constructor_list__2W2F0",element:"burger-constructor_element__2MG3g",total:"burger-constructor_total__SZlLo",price:"burger-constructor_price__3KB9e"}},32:function(e,t,n){e.exports={order:"order-details_order__3dUFF",order__title:"order-details_order__title__1AveJ"}},46:function(e,t,n){e.exports={tabs:"burger-ingredients_tabs__2vZjv",cards:"burger-ingredients_cards__3dmX-",card:"burger-ingredients_card__2gYk1",price:"burger-ingredients_price__F8CRP",name:"burger-ingredients_name__2DbMm",main:"burger-ingredients_main__1y7y1"}},47:function(e,t,n){e.exports={main:"login_main__2qcoB",link:"login_link__3CaOx",form:"login_form__1XmAp"}},48:function(e,t,n){e.exports={main:"item-structure_main__3cmcT",name:"item-structure_name__2O1cd",total:"item-structure_total__tPaGA",item:"item-structure_item__3S8sc"}},56:function(e,t,n){e.exports={box:"card_box__qI_Kh",cards:"card_cards__3vwWE",card:"card_card__2DKh8",price:"card_price__3Uouv",name:"card_name__2dRNc"}},57:function(e,t,n){e.exports={main:"register_main__1Uwki",link:"register_link__3fN4u",form:"register_form__3NaAQ"}},58:function(e,t,n){e.exports={main:"forgot-password_main__rIDNi",link:"forgot-password_link__3pp6Z",form:"forgot-password_form__2fTs_"}},59:function(e,t,n){e.exports={main:"reset-password_main__2Y2-k",link:"reset-password_link__38Ebv",form:"reset-password_form__2SYFo"}},60:function(e,t,n){e.exports={img:"burger-image_img__3GiWS",container:"burger-image_container__1mYjP",icon:"burger-image_icon__10EM9"}},82:function(e,t,n){e.exports={cards:"cards_cards__PNwP2",card:"cards_card__2SiS_",price:"cards_price__3HFGU",name:"cards_name__3yUmT",link:"cards_link__3TG8Z"}},84:function(e,t,n){e.exports={container:"constructor-empty_container__1kSTF",title:"constructor-empty_title__Kdl6Z"}},87:function(e,t,n){e.exports={link:"burger-ready_link__2Kyd2",main:"burger-ready_main__2m90O"}},88:function(e,t,n){e.exports={burgerlink:"profile-orders_burgerlink__6dE2k"}},89:function(e,t,n){e.exports={modal:"modal_modal__1Eg2B",close:"modal_close__3IWVq"}}},[[199,1,2]]]);
//# sourceMappingURL=main.4300aed7.chunk.js.map